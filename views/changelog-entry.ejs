            <!DOCTYPE html>
            <html lang="en">
            <head>
              <meta charset="UTF-8" />
              <meta name="viewport" content="width=device-width, initial-scale=1.0" />
              <title><%= entry.title %> – Ylsoo Changelog</title>
              <link rel="stylesheet" href="/css/style.css" />
              <style>
                /* ---------- Base Layout ---------- */
                main {
                  max-width: 850px;
                  margin: 4rem auto;
                  padding: 0 1.5rem;
                }
                h1 {
                  font-size: 2rem;
                  font-weight: 700;
                  margin-bottom: 0.5rem;
                  color: #111827;
                }
                .meta {
                  color: #6b7280;
                  font-size: 0.95rem;
                  margin-bottom: 2rem;
                }
                p {
                  color: #374151;
                  line-height: 1.7;
                  font-size: 1.05rem;
                  margin-bottom: 1.2rem;
                }
                img, video {
                  display: block;
                  max-width: 100%;
                  margin: 1.5rem 0;
                  border-radius: 10px;
                  box-shadow: 0 2px 12px rgba(0,0,0,0.08);
                }

                /* ---------- Floating Audio Player ---------- */
                .floating-audio-player {
                  position: fixed;
                  bottom: 28px;
                  right: 28px;
                  width: 360px;
                  background: linear-gradient(145deg, #f3f4f6, #e5e7eb);
                  color: #111827;
                  border-radius: 18px;
                  box-shadow: 0 8px 28px rgba(0,0,0,0.15);
                  backdrop-filter: blur(12px);
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  z-index: 999;
                  padding: 18px 22px;
                  animation: slideUp 0.45s ease forwards;
                  transition: all 0.3s ease;
                }

                @keyframes slideUp {
                  from { transform: translateY(80px); opacity: 0; }
                  to { transform: translateY(0); opacity: 1; }
                }

                .audio-controls {
                  display: flex;
                  align-items: center;
                  gap: 14px;
                  width: 100%;
                }

                .play-toggle {
                  background: #e5e7eb;
                  border: none;
                  width: 50px;
                  height: 50px;
                  border-radius: 50%;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  cursor: pointer;
                  color: #111827;
                  transition: all 0.25s ease;
                  flex-shrink: 0;
                }
                .play-toggle:hover {
                  background: #d1d5db;
                  transform: scale(1.05);
                }

                .track-info {
                  flex: 1;
                  display: flex;
                  flex-direction: column;
                  gap: 6px;
                }

                .track-info .title {
                  font-size: 0.95rem;
                  font-weight: 600;
                  color: #1f2937;
                }

                .progress-bar {
                  position: relative;
                  width: 100%;
                  height: 5px;
                  background: #d1d5db;
                  border-radius: 5px;
                  overflow: hidden;
                  cursor: pointer;
                }
                .progress {
                  width: 0%;
                  height: 100%;
                  background: #6b7280;
                  border-radius: 5px;
                  transition: width 0.25s linear;
                }

                .time-display {
                  font-size: 0.85rem;
                  color: #6b7280;
                  min-width: 90px;
                  text-align: right;
                }

                .icon.hidden { display: none; }

                /* ---------- Responsive ---------- */
                @media (max-width: 500px) {
                  .floating-audio-player {
                    width: calc(100% - 40px);
                    right: 20px;
                    left: 20px;
                  }
                }
              </style>
            </head>

            <body>
              <%- include('partials/navbar', { user }) %>

              <main>
                <h1><%= entry.title %></h1>
                <div class="meta">
                  <%= entry.version ? `Version ${entry.version} · ` : '' %>
                  <%= new Date(entry.release_date).toLocaleDateString() %>
                </div>

                <p><%- entry.description.replace(/\n/g, '<br>') %></p>

                <% if (entry.image_url) { %>
                  <img src="<%= entry.image_url %>" alt="Changelog image">
                <% } %>

                <% if (entry.video_url) { %>
                  <video controls src="<%= entry.video_url %>"></video>
                <% } %>

                <% if (entry.audio_url) { %>
                  <div class="floating-audio-player" data-audio="<%= entry.audio_url %>">
                    <div class="audio-controls">
                      <button class="play-toggle" aria-label="Play/Pause">
                        <svg class="icon play" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="26" height="26">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3l14 9-14 9V3z" />
                        </svg>
                        <svg class="icon pause hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="26" height="26">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6" />
                        </svg>
                      </button>

                      <div class="track-info">
                        <p class="title">Audio Log</p>
                        <div class="progress-bar"><div class="progress"></div></div>
                      </div>

                      <div class="time-display">0:00 / 0:00</div>
                    </div>
                  </div>
                <% } %>

                <p style="margin-top:2rem;"><a href="/changelog" style="color:#4b5563;text-decoration:none;">← Back to Changelog</a></p>
              </main>

              <%- include('partials/footer') %>

              <% if (entry.audio_url) { %>
              <script>
                document.addEventListener('DOMContentLoaded', () => {
                  const player = document.querySelector('.floating-audio-player');
                  if (!player) return;

                  const audio = new Audio(player.dataset.audio);
                  const playToggle = player.querySelector('.play-toggle');
                  const playIcon = player.querySelector('.icon.play');
                  const pauseIcon = player.querySelector('.icon.pause');
                  const progressBar = player.querySelector('.progress-bar');
                  const progress = player.querySelector('.progress');
                  const timeDisplay = player.querySelector('.time-display');
                  let isPlaying = false;

                  playToggle.addEventListener('click', () => {
                    if (isPlaying) {
                      audio.pause();
                    } else {
                      audio.play();
                    }
                  });

                  audio.addEventListener('play', () => {
                    isPlaying = true;
                    playIcon.classList.add('hidden');
                    pauseIcon.classList.remove('hidden');
                  });

                  audio.addEventListener('pause', () => {
                    isPlaying = false;
                    playIcon.classList.remove('hidden');
                    pauseIcon.classList.add('hidden');
                  });

                  audio.addEventListener('timeupdate', () => {
                    const percent = (audio.currentTime / audio.duration) * 100;
                    progress.style.width = percent + '%';
                    timeDisplay.textContent = formatTime(audio.currentTime) + ' / ' + formatTime(audio.duration);
                  });

                  progressBar.addEventListener('click', (e) => {
                    const width = progressBar.clientWidth;
                    const clickX = e.offsetX;
                    audio.currentTime = (clickX / width) * audio.duration;
                  });

                  function formatTime(sec) {
                    if (isNaN(sec)) return '0:00';
                    const m = Math.floor(sec / 60);
                    const s = Math.floor(sec % 60);
                    return `${m}:${s < 10 ? '0' + s : s}`;
                  }
                });
              </script>
              <% } %>
            </body>
            </html>
